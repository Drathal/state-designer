## Introduction

**State Designer** is a tool for designing how a user interface should work.

## Installation

```
npm install state-designer
```

or

```
yarn add state-designer
```

## Usage

Using **State Designer** involves three steps:

1. **Create** a machine.
2. **Subscribe** to its updates.
3. **Send** events to the machine.

### In React

For React projects, you can use the provided [`useStateDesigner`](/docs/useStateDesigner) hook to both create the machine and subscribe to its updates. The hook returns several useful items, including a method that you can use to send events to the machine.

```jsx
// Counter.js

import React from "react"
import { useStateDesigner } from "state-designer"

export function Counter() {
  const { data, send } = useStateDesigner({
    data: { count: 0 },
    on: { PLUS_CLICKED: data => data.count++ }
  })

  return (
    <div>
      <h2>{data.count}</h2>
      <button onClick={() => send("PLUS_CLICKED")}>+</button>
    </div>
  )
}
```

You can also use the `createStateDesigner` function to create your machine separately, then subscribe to its changes using `useStateDesigner`. With this approach, you can subscribe _multiple_ components to the same machine.

```jsx
// Counter.js

import React from "react"
import { createStateDesigner } from "state-designer"

const machine = createStateDesigner({
  data: { count: 0 },
  on: { PLUS_CLICKED: data => data.count++ }
})

export function Counter() {
  const { data, send } = useStateDesigner(machine)

  return (
    <div>
      <h2>{data.count}</h2>
      <button onClick={() => send("PLUS_CLICKED")}>+</button>
    </div>
  )
}
```

## In Vanilla JavaScript

To use **State Designer** with regular JavaScript, you will need to "manually" subscribe to your machine's changes using its `subscribe` method.

```js
// index.js

import { createStateDesigner } from "state-designer"

const machine = createStateDesigner({
  data: { count: 0 },
  on: { PLUS_CLICKED: data => data.count++ }
})

const countH2 = document.getElementById("countH2")
const button = document.getElementById("button")

machine.subscribe(({ data }) => {
  countH2.textContent = data.count
})

button.onclick = () => machine.send("PLUS_CLICKED")
```

## Concepts

**State Designer** introduces several new concepts.

- [Data](/)
- [Events](/)
- [Event Handlers](/)
- [States](/)
- [Collections](/)

Follow the links above to learn more about each of these concepts and how they work in State Designer.

## Example

View on [CodeSandbox](https://codesandbox.io/s/counter-with-states-cwvn3).

```jsx
import React from "react"
import { useStateDesigner } from "state-designer"

export default function Counter() {
  const { data, send, isIn } = useStateDesigner({
    data: {
      min: 0,
      max: 10,
      count: 0
    },
    initial: "inactive",
    states: {
      inactive: {
        on: {
          TOGGLED: { to: "active" }
        }
      },
      active: {
        on: {
          TOGGLED: { to: "inactive" },
          PLUS_CLICKED: { unless: "atMax", do: "incrementCount" },
          MINUS_CLICKED: { unless: "atMin", do: "decrementCount" }
        }
      }
    },
    conditions: {
      atMin(data) {
        return data.count <= data.min
      },
      atMax(data) {
        return data.count >= data.max
      }
    },
    actions: {
      incrementCount(data) {
        data.count++
      },
      decrementCount(data) {
        data.count--
      }
    }
  })

  return (
    <div>
      <h2>Count: {data.count}</h2>
      <button onClick={() => send("TOGGLED")}>Toggle</button>
      <button disabled={!isIn("active")} onClick={() => send("PLUS_CLICKED")}>
        +
      </button>
      <button disabled={!isIn("active")} onClick={() => send("MINUS_CLICKED")}>
        -
      </button>
    </div>
  )
}
```
